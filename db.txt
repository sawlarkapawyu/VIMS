CREATE TABLE households (
  id bigint GENERATED BY DEFAULT AS IDENTITY NOT NULL,
  entry_date timestamp WITHOUT TIME ZONE NOT NULL,
  household_no TEXT NOT NULL,
  house_no TEXT NOT NULL,
  state_region_id BIGINT NULL,
  district_id BIGINT NULL,
  township_id BIGINT NULL,
  ward_village_tract_id BIGINT NULL,
  village_id BIGINT NULL,
  created_at timestamp with time zone NOT NULL DEFAULT timezone('utc'::text, now()),
  CONSTRAINT households_pkey PRIMARY KEY (household_no),
  CONSTRAINT households_house_no_key UNIQUE (house_no),
  CONSTRAINT households_township_id_fkey FOREIGN KEY (township_id) REFERENCES townships (id) ON DELETE CASCADE,
  CONSTRAINT households_village_id_fkey FOREIGN KEY (village_id) REFERENCES villages (id) ON DELETE CASCADE,
  CONSTRAINT households_ward_village_tract_id_fkey FOREIGN KEY (ward_village_tract_id) REFERENCES ward_village_tracts (id) ON DELETE CASCADE,
  CONSTRAINT households_state_region_id_fkey FOREIGN KEY (state_region_id) REFERENCES state_regions (id) ON DELETE CASCADE,
  CONSTRAINT households_district_id_fkey FOREIGN KEY (district_id) REFERENCES districts (id) ON DELETE CASCADE
);

CREATE TABLE families (
  id bigint GENERATED BY DEFAULT AS IDENTITY NOT NULL,
  name text NOT NULL,
  date_of_birth timestamp without time zone NOT NULL,
  nrc_id text NOT NULL,
  gender text NOT NULL,
  father_name text NOT NULL,
  mother_name text NOT NULL,
  remark text NOT NULL,
  inserted_at timestamp with time zone NOT NULL DEFAULT timezone('utc'::text, now()),
  relationship_id bigint NULL REFERENCES relationships(id) ON DELETE CASCADE,
  occupation_id bigint NULL REFERENCES occupations(id) ON DELETE CASCADE,
  education_id bigint NULL REFERENCES educations(id) ON DELETE CASCADE,
  ethnicity_id bigint NULL REFERENCES ethnicities(id) ON DELETE CASCADE,
  nationality_id bigint NULL REFERENCES nationalities(id) ON DELETE CASCADE,
  religion_id bigint NULL REFERENCES religions(id) ON DELETE CASCADE,
  household_no text NULL REFERENCES households(household_no) ON DELETE CASCADE,
  CONSTRAINT families_pkey PRIMARY KEY (id),
  CONSTRAINT families_nrc_id_key UNIQUE (nrc_id),
  CONSTRAINT families_gender_check CHECK (gender = ANY (ARRAY['ကျား'::text, 'မ'::text]))
);

create table state_regions (
    id bigint generated by default as identity primary key,
    name text not null,
    inserted_at timestamp with time zone default timezone('utc'::text, now()) not null
);

create table districts (
    id bigint generated by default as identity primary key,
    name text not null,
    inserted_at timestamp with time zone default timezone('utc'::text, now()) not null
);

create table townships (
    id bigint generated by default as identity primary key,
    name text not null,
    inserted_at timestamp with time zone default timezone('utc'::text, now()) not null
);

create table ward_village_tracts (
    id bigint generated by default as identity primary key,
    name text not null,
    inserted_at timestamp with time zone default timezone('utc'::text, now()) not null
);

create table villages (
    id bigint generated by default as identity primary key,
    name text not null,
    inserted_at timestamp with time zone default timezone('utc'::text, now()) not null
);

create table families (
    id bigint generated by default as identity primary key,
    name text not null,
    date_of_birth timestamp not null,
    nrc_id text not null,
    gender text not null check (gender in ('Male', 'Female')),
    father_name text not null,
    mother_name text not null,
    remark text not null,
    user_id uuid references auth.users not null,
    inserted_at timestamp with time zone default timezone('utc'::text, now()) not null
);

create table relationships (
    id bigint generated by default as identity primary key,
    name text not null,
    inserted_at timestamp with time zone default timezone('utc'::text, now()) not null
);

create table occuptions (
    id bigint generated by default as identity primary key,
    name text not null,
    inserted_at timestamp with time zone default timezone('utc'::text, now()) not null
);

create table educations (
    id bigint generated by default as identity primary key,
    name text not null,
    inserted_at timestamp with time zone default timezone('utc'::text, now()) not null
);

create table ethnicities (
    id bigint generated by default as identity primary key,
    name text not null,
    inserted_at timestamp with time zone default timezone('utc'::text, now()) not null
);

create table nationalities (
    id bigint generated by default as identity primary key,
    name text not null,
    inserted_at timestamp with time zone default timezone('utc'::text, now()) not null
);

create table religions (
    id bigint generated by default as identity primary key,
    name text not null,
    inserted_at timestamp with time zone default timezone('utc'::text, now()) not null
);

create table deaths (
    id bigint generated by default as identity primary key,
    death_date timestamp not null,
    death_place text not null,
    complainant text not null,
    remark text not null,
    inserted_at timestamp with time zone default timezone('utc'::text, now()) not null
);



